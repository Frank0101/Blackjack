(function(){var n=window.blackjackApp=window.blackjackApp||{};n.CardModel=function(n,t){var i=this;i.suit=n;i.sign=t.name;i.values=t.values}})(jQuery),function(){var n=window.blackjackApp=window.blackjackApp||{};n.DeckModel=function(t){function r(){for(var u,r=0;r<t.SUIT_LIST().length;r++)for(u=0;u<t.SIGNS_LIST().length;u++)i.cards.push(new n.CardModel(t.SUIT_LIST()[r],t.SIGNS_LIST()[u]))}var i=this;i.cards=[];i.drawCard=function(){if(i.cards.length==0)return null;var n=Math.floor(Math.random()*i.cards.length),t=i.cards[n];return i.cards.splice(n,1),t};r()}}(jQuery),function(){var n=window.blackjackApp=window.blackjackApp||{};n.PlayerModel=function(){function t(n){for(var f,s,i,e,r,o,t=[0],u=0;u<n.length;u++)for(f=n[u],s=t.length,i=0;i<s;i++)for(e=t[i],r=0;r<f.values.length;r++)o=f.values[r],r==0?t[i]=e+o:t.push(e+o);return t}function i(n){for(var i,r,t=0;t<n.length-1;t++)for(i=t+1;i<n.length;i++)n[t]<n[i]&&(r=n[t],n[t]=n[i],n[i]=r);return n}function r(n){for(var i=null,t=0;t<n.length;t++)if(i=n[t],i<=21||t==n.length-1)break;return i}var n=this;n.cards=[];n.points=0;n.isBusted=function(){return n.points>21};n.calculatePoints=function(){n.points=r(i(t(n.cards)))}}}(jQuery);angular.module("blackjackApp",["blackjackApp.constants","blackjackApp.controllers","blackjackApp.directives","blackjackApp.services"]);angular.module("blackjackApp.constants",[]);angular.module("blackjackApp.controllers",[]);angular.module("blackjackApp.directives",[]);angular.module("blackjackApp.services",[]);angular.module("blackjackApp.constants").constant("cardsConstants",{SUIT:{HEARTS:"hearts",DIAMONDS:"diamonds",CLUBS:"clubs",SPADES:"spades"},SUIT_LIST:function(){return[this.SUIT.HEARTS,this.SUIT.DIAMONDS,this.SUIT.CLUBS,this.SUIT.SPADES]},SIGNS:{ACE:{name:"a",values:[1,11]},CARD_2:{name:"2",values:[2]},CARD_3:{name:"3",values:[3]},CARD_4:{name:"4",values:[4]},CARD_5:{name:"5",values:[5]},CARD_6:{name:"6",values:[6]},CARD_7:{name:"7",values:[7]},CARD_8:{name:"8",values:[8]},CARD_9:{name:"9",values:[9]},CARD_10:{name:"10",values:[10]},JACK:{name:"j",values:[10]},QUEEN:{name:"q",values:[10]},KING:{name:"k",values:[10]}},SIGNS_LIST:function(){return[this.SIGNS.ACE,this.SIGNS.CARD_2,this.SIGNS.CARD_3,this.SIGNS.CARD_4,this.SIGNS.CARD_5,this.SIGNS.CARD_6,this.SIGNS.CARD_7,this.SIGNS.CARD_8,this.SIGNS.CARD_9,this.SIGNS.CARD_10,this.SIGNS.JACK,this.SIGNS.QUEEN,this.SIGNS.KING]}});angular.module("blackjackApp.controllers").controller("blackjackController",["$scope","gameService",function(n,t){function i(){n.dealer.cards.push(n.deck.drawCard());n.dealer.calculatePoints()}function r(){n.player.cards.push(n.deck.drawCard());n.player.calculatePoints()}n.init=function(){n.deck=t.getNewDeck();n.dealer=t.getNewPlayer();n.player=t.getNewPlayer();n.dealer.cards=[n.deck.drawCard()];n.player.cards=[n.deck.drawCard(),n.deck.drawCard()];n.dealer.calculatePoints();n.player.calculatePoints();n.isPlayerTurn=!0};n.init();n.playerWins=function(){return n.dealer.isBusted()};n.dealerWins=function(){return n.isPlayerTurn&&n.player.isBusted()||!n.isPlayerTurn&&!n.dealer.isBusted()&&n.dealer.points>=n.player.points};n.isEndGame=function(){return n.dealerWins()||n.playerWins()};n.canHit=function(){return!n.isEndGame()&&n.player.points<21};n.hit=function(){r()};n.canStick=function(){return!n.isEndGame()&&n.player.points>n.dealer.points};n.stick=function(){for(n.isPlayerTurn=!1;!n.isEndGame();)i()}}]);angular.module("blackjackApp.directives").directive("playerDirective",function(){return{restrict:"E",replace:!0,templateUrl:"/blackjackApp/app/directives/d.playerDirective.html",scope:{player:"="}}});angular.module("blackjackApp.services").service("gameService",["cardsConstants",function(n){var t=window.blackjackApp=window.blackjackApp||{},i=this;i.getNewDeck=function(){return new t.DeckModel(n)};i.getNewPlayer=function(){return new t.PlayerModel}}]);
//# sourceMappingURL=blackjackBundle.min.js.map
